{% load static %}

<!-- TODO: Interromper monitoramento se o usuario recarregar a pagina ou fechar a aba -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B3 Tracker</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="{% static 'css/mainpage.css' %}">
</head>
<body>

    <div class="custom-title">
        <h1>B3 Tracker</h1>
    </div>
    
    <div class="custom-instructions">
        <h5>Instruções:</h5>
        1. Digite o seu email <br>
        2. Selecione o ativo que deseja monitorar <br>
        3. Preencha os valores de preço mínimo, máximo e periodicidade do monitoramento <br>
        4. Aperte o botão "Iniciar" para começar a monitorar <br>
        5. Aperte o botão "Parar" para cancelar o monitoramento <br>
        6. Para monitorar vários ativos basta apertar o botão "Adicionar ativo", preencher seus campos e iniciar <br>
        7. Para buscar/atualizar todos os preços já buscados pelo email selecionado aperte o botão "Atualizar histórico"<br>
        8. (OPCIONAL) Caso deseje pesquisar por código do ativo basta preencher o seu nome e apertar "Atualizar histórico" novamente<br>
        <br>

        <h5>Digite o seu email para iniciar:</h5>
    </div>
    
    <input type="email" id="email-input" class="form-control" placeholder="Digite o seu email" required>

    <br>
    <form action="" id="track-data">
        <div id="ticker-form-fields">
            <div class="card mb-3 custom-card">
                <div class="form-group row" id="select-form-group-1">

                    <label for="ticker-select-1" class="custom-label">Ativos:</label>
                    <select name="ticker-select-1" id="ticker-select-1" class="form-control custom-select" form="track-data">
                    </select>
                    
                    <label for="min-value-1" class="custom-label">Valor Mínimo:</label>
                    <input type="number" id="min-value-1" class="form-control custom-input" name="min-value-1" min="1" max="999">
                    
                    <label for="max-value-1" class="custom-label">Valor Máximo:</label>
                    <input type="number" id="max-value-1" class="form-control custom-input" name="max-value-1" min="1" max="999">
            
                    <label for="frequency-1" class="custom-label">Periodicidade (em minutos):</label>
                    <input type="number" id="frequency-1" class="form-control custom-input" name="frequency-1" min="1" max="60">
    
                    <button id="start-track-1" class="btn btn-success custom-form-start-button">Iniciar</button>
                    <button id="stop-track-1" class="btn btn-danger custom-form-stop-button">Parar</button>
    
                    <label for="track-id-1" class="custom-label">ID:</label>
                    <input id="track-id-1" class="form-control custom-input-readonly" name="track-id-1" type="text" placeholder="Aguardando início..." readonly />
                </div>
            </div>
        </div>
    </form>

    <button id="add-select-btn" class="btn btn-primary custom-add-button">Adicionar ativo</button>

    <br>
    
    <input type="text" id="search-ticker" class="form-control custom-input-2" name="search-ticker" placeholder="Digite o código, ex: PETR3">
    <button id="get-history" class="btn btn-primary custom-history-button">Atualizar histórico</button>

    <table class="table table-striped custom-table" id="tracker-history-table">
        <thead>
          <tr>
            <th scope="col">Email do requerente</th>
            <th scope="col">Código do ativo</th>
            <th scope="col">Preço</th>
            <th scope="col">ID do monitoramento</th>
            <th scope="col">Data</th>
          </tr>
        </thead>
        <tbody id="price-history">
        </tbody>
    </table>

    <!-- Importar CDN do jquery e arquivo de js -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="{% static 'js/mainpage.js' %}"></script>
</body>
</html>
